<!--
Toddler Playground with Cheering Audio & Mood
- Cheering sound and visuals for correct actions in all games!
- Gentle "Try again" spoken feedback for incorrect answers.
- All images: OpenMoji.org (CC BY-SA 4.0).
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <title>Toddler Playground</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #21b3fd;
      --secondary: #fff;
      --accent: #f9b846;
      --accent2: #fb6d6d;
      --green: #60d394;
      --pink: #ff90b3;
      --purple: #ad9aff;
      --progress-empty: #c0dbfc;
      --progress-found: #34e08c;
      --shadow: 0 4px 24px 0 rgba(33,179,253,0.09), 0 2px 8px 0 #ffc0cb0d;
      --confetti-1: #fb6d6d;
      --confetti-2: #34e08c;
      --confetti-3: #f9b846;
      --confetti-4: #ad9aff;
      --confetti-5: #ff90b3;
      --confetti-6: #21b3fd;
      --text: #28344c;
      --text-inverse: #fff;
      --card: #fff7ef;
      --tab: #e4f5ff;
      --tab-active: #b7eaff;
    }
    html, body {
      min-width: 320px;
      min-height: 100vh;
      font-family: 'Baloo 2', 'Comic Sans MS', 'Comic Sans', Arial, sans-serif;
      background: linear-gradient(180deg, #d0f3ff 0%, #fff7ef 100%);
      color: var(--text);
      overscroll-behavior: none;
    }
    body { margin:0; }
    #app-wrapper {
      max-width: 460px;
      margin: 1.2rem auto 1.2rem auto;
      padding: 1.4rem 0.3rem 2.1rem 0.3rem;
      border-radius: 2.6rem;
      box-shadow: var(--shadow);
      background: var(--card);
      display: flex; flex-direction: column; align-items: center;
      position: relative;
    }
    .tab-bar {
      width: 98%;
      display: flex;
      justify-content: center;
      margin-bottom: 1.5em;
      gap: 0.45em;
      z-index: 10;
      border-radius: 2em;
      background: var(--tab);
      padding: 0.2em;
      box-shadow: 0 2px 8px #21b3fd18;
    }
    .tab-btn {
      flex: 1 1 33%;
      background: transparent;
      color: var(--primary);
      font-size: 1.23rem;
      padding: 0.75em 1.1em;
      border: none;
      font-weight: 700;
      border-radius: 1.5em;
      cursor: pointer;
      letter-spacing: 0.01em;
      transition: background 0.16s, color 0.18s;
      outline: none;
      display: flex; align-items: center; justify-content: center;
      gap: 0.45em;
    }
    .tab-btn.active, .tab-btn:focus {
      background: var(--tab-active);
      color: #1360a6;
      outline: 2.5px solid var(--primary);
    }
    .game-content {
      width: 99%;
      margin-top: 0.6em;
      margin-bottom: 0.8em;
      min-height: 300px;
    }
    .celebrate {
      font-size: 2.4rem;
      font-weight: bold;
      color: #34e08c;
      margin: 0.5em 0 0.1em 0;
      text-align: center;
      animation: pop-letter 0.8s cubic-bezier(.41,1.6,.56,1.14);
      letter-spacing: 0.03em;
      text-shadow: 0 2px 12px #fff, 0 1px 8px #fff8;
    }
    @keyframes pop-letter {
      0% { transform: scale(0.6) rotate(-13deg);}
      70% { transform: scale(1.17) rotate(7deg);}
      100% { transform: scale(1.04) rotate(0deg);}
    }
    .feedback-word.celebrate { color: #f9b846;}
    /* Add rest of styles from previous code for .progress-section, .match-card, etc */
    .progress-section { display: flex; flex-direction: column; align-items: center; margin: 0.6rem 0 1.1rem 0; gap: 0.3rem; z-index: 2; width: 98%;}
    .progress-dots { display: flex; flex-wrap: wrap; gap: 0.35rem 0.18rem; justify-content: center; margin-bottom: 0.3rem; max-width: 390px;}
    .progress-dot { width: 26px; height: 26px; border-radius: 50%; background: var(--progress-empty); border: 2.2px solid #fff; box-shadow: 0 1.2px 4px #e0e7ef91; display: flex; align-items: center; justify-content: center; font-size: 1.04rem; font-weight: 700; color: #bdd4fc; transition: background 0.35s; position: relative; user-select: none;}
    .progress-dot.found { background: var(--progress-found); color: #31a871; animation: popdot 0.2s cubic-bezier(0.4,1.8,0.6,1) 1; border: 2.2px solid var(--green);}
    @keyframes popdot { 0% { transform: scale(1); } 60% { transform: scale(1.28); } 100% { transform: scale(1); }}
    .progress-counter { font-size: 1.18rem; color: var(--primary); letter-spacing: 0.05em; font-weight: 700; text-align: center; padding-top: 2px;}
    .feedback { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 210px; width: 99%; margin: 1.1rem 0 0.5rem 0; position: relative; z-index: 2; outline: none;}
    .feedback-img { width: 134px; height: 134px; border-radius: 2rem; background: #fff; display: flex; align-items: center; justify-content: center; margin-bottom: 0.4em; box-shadow: 0 4px 28px 0 rgba(33,179,253,0.13); opacity: 0; transform: scale(0.6) rotate(-9deg); transition: opacity 0.38s, transform 0.44s cubic-bezier(.39,2.0,.47,1.15); font-size: 5rem; overflow: hidden; border: 2.5px solid #e0e7ef; background: linear-gradient(130deg, #fafcfd 60%, #e5f8ff 100%); will-change: transform, opacity;}
    .feedback-img.show { opacity: 1; transform: scale(1.11) rotate(2deg);}
    .feedback-word { font-size: 1.55rem; color: var(--accent2); font-weight: 700; margin-bottom: 0.07em; text-align: center; min-height: 1.8em;}
    .feedback-number { font-size: 4.7rem; font-weight: 700; color: var(--accent); margin-bottom: 0.13em; text-align: center; opacity: 0; min-height: 1.2em;}
    .feedback-number.show { opacity: 1; }
    .confetti { position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 30; display: flex; align-items: center; justify-content: center; overflow: visible;}
    .confetti > div { position: absolute; will-change: transform, opacity; pointer-events: none; font-size: 2.4rem; text-shadow: 0 1.5px 0 #fff, 0 1px 8px #eee; filter: drop-shadow(0 1px 4px #fff);}
    .match-cards, .match-drops { display: flex; flex-wrap: wrap; gap: 1.2em; justify-content: center; }
    .match-card { width: 88px; height: 102px; background: #e0f8ff; border-radius: 1.3em; box-shadow: 0 2px 10px #abf1ff3c; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: grab; position:relative; font-size: 2.4rem; user-select:none; font-weight:700; border: 2.5px solid #fff; transition: box-shadow 0.2s, background 0.13s;}
    .match-card.dragging { opacity: 0.66; box-shadow: 0 6px 16px #43bbfd4d;}
    .match-drop { width: 88px; height: 102px; background: #f6ecff; border-radius: 1.3em; box-shadow: 0 2px 10px #abf1ff3c; display: flex; align-items: center; justify-content: center; margin: 0.2em; border: 2.5px dashed #b8aaff; position:relative; transition: border-color 0.14s, background 0.16s;}
    .match-drop.matched { background: #d9ffe3; border-color: #5ecb95;}
    .match-drop .match-img { width: 66px; height: 66px; pointer-events:none; filter: drop-shadow(0 2px 6px #fff);}
    .match-drop .drop-label { position: absolute; bottom: 0.2em; width: 100%; text-align: center; font-size: 1.05em; color: #ad9aff;}
    .counting-q { text-align: center; font-size: 1.3rem; font-weight: 700; color: var(--primary); margin: 0.6em 0 1.2em 0;}
    .counting-objects { display: flex; flex-wrap: wrap; gap: 0.6em; justify-content: center; margin-bottom: 1.1em;}
    .counting-objects img { width: 54px; height: 54px; }
    .counting-options { display: flex; gap: 1.1em; justify-content: center; margin-bottom: 1em;}
    .count-opt { font-size: 2.1rem; color: #fb6d6d; background: #fff; border: 2.5px solid #f9b846; border-radius: 1em; min-width: 54px; min-height: 54px; display: flex; align-items: center; justify-content: center; font-weight: 700; cursor: pointer; box-shadow: 0 2px 12px #fae5b0bb; transition: background 0.15s, color 0.13s;}
    .count-opt.correct { background: #d9ffe3; color: #5ecb95; border-color: #5ecb95;}
    .count-opt.incorrect { background: #fff0ef; color: #fb6d6d; border-color: #fb6d6d;}
    @media (max-width: 650px) {
      #app-wrapper { padding: 0.7rem 0.02rem 1.2rem 0.02rem; }
      .feedback-img { width: 82px; height: 82px; font-size: 2.6rem; }
      .match-card, .match-drop { width: 61px; height: 70px; }
      .match-img { width: 40px; height: 40px; }
      .progress-dot { width: 19px; height: 19px; font-size: 1rem;}
      .counting-objects img { width: 34px; height: 34px;}
    }
  </style>
</head>
<body>
<div id="app-wrapper" aria-label="Toddler Playground">
  <nav class="tab-bar" role="tablist">
    <button class="tab-btn active" id="tab-typing" role="tab" aria-selected="true" aria-controls="typing-tab"><span>‚å®Ô∏è</span> Typing</button>
    <button class="tab-btn" id="tab-matching" role="tab" aria-selected="false" aria-controls="matching-tab"><span>üß©</span> Matching</button>
    <button class="tab-btn" id="tab-counting" role="tab" aria-selected="false" aria-controls="counting-tab"><span>üî¢</span> Counting</button>
  </nav>
  <section class="game-content" id="game-content">
    <!-- Game panels injected here -->
  </section>
  <div class="confetti" aria-hidden="true" style="display:none"></div>
</div>
<!-- Sounds -->
<audio id="clickSound" preload="auto" aria-hidden="true">
  <source src="data:audio/mp3;base64,//uQxA....[TRUNCATED]" type="audio/mp3" />
</audio>
<audio id="dingSound" preload="auto" aria-hidden="true">
  <source src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa60c8.mp3" type="audio/mp3" />
</audio>
<audio id="cheerSound" preload="auto">
  <source src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfcb708.mp3" type="audio/mp3" />
</audio>
<script>
const openmoji = code => `https://cdn.jsdelivr.net/gh/hfg-gmuend/openmoji@latest/color/svg/${code}.svg`;
const alphabetData = [
  { letter: "A", word: "Apple", img: openmoji('1F34E') },
  { letter: "B", word: "Bear", img: openmoji('1F43B') },
  { letter: "C", word: "Cat", img: openmoji('1F431') },
  { letter: "D", word: "Dog", img: openmoji('1F436') },
  { letter: "E", word: "Elephant", img: openmoji('1F418') },
  { letter: "F", word: "Frog", img: openmoji('1F438') },
  { letter: "G", word: "Giraffe", img: openmoji('1F992') },
  { letter: "H", word: "House", img: openmoji('1F3E0') },
  { letter: "I", word: "Ice Cream", img: openmoji('1F366') },
  { letter: "J", word: "Jellyfish", img: openmoji('1FABC') },
  { letter: "K", word: "Kangaroo", img: openmoji('1F998') },
  { letter: "L", word: "Lion", img: openmoji('1F981') },
  { letter: "M", word: "Monkey", img: openmoji('1F412') },
  { letter: "N", word: "Nest", img: openmoji('1FAB9') },
  { letter: "O", word: "Octopus", img: openmoji('1F419') },
  { letter: "P", word: "Penguin", img: openmoji('1F427') },
  { letter: "Q", word: "Queen", img: openmoji('1F478') },
  { letter: "R", word: "Rabbit", img: openmoji('1F430') },
  { letter: "S", word: "Sun", img: openmoji('2600') },
  { letter: "T", word: "Tiger", img: openmoji('1F42F') },
  { letter: "U", word: "Umbrella", img: openmoji('2602') },
  { letter: "V", word: "Violin", img: openmoji('1F3BB') },
  { letter: "W", word: "Whale", img: openmoji('1F433') },
  { letter: "X", word: "Xylophone", img: openmoji('1FA97') },
  { letter: "Y", word: "Yacht", img: openmoji('26F5') },
  { letter: "Z", word: "Zebra", img: openmoji('1F993') }
];
const numberData = Array.from({length:10},(_,i)=>({num:i,img:openmoji(`003${i}-20E3`)}));
const confettiEmojis = ['üéâ','üéà','ü•≥','üëè','üòÉ','‚ú®','üéä','üß∏','üç≠','ü¶í','üê∂','üê±'];
const cheerPhrases = [
  "Yay!", "Great job!", "Super!", "Well done!", "Awesome!", "You did it!", "Fantastic!", "Bravo!"
];
const TOTAL_KEYS = 36;
const keySet = new Set([
  ...Array.from({length: 26}, (_, i) => String.fromCharCode(65 + i)),
  ...Array.from({length: 10}, (_, i) => String(i))
]);
const keyOrder = [
  ..."ABCDEFGHIJKLMNOPQRSTUVWXYZ", "0","1","2","3","4","5","6","7","8","9"
];
const clickSound = document.getElementById('clickSound');
const dingSound = document.getElementById('dingSound');
const cheerSound = document.getElementById('cheerSound');
const confettiDiv = document.querySelector('.confetti');
function playSound(audioElem) { try { audioElem.currentTime = 0; audioElem.play(); } catch{} }
function sayPhrase(phrases) {
  try {
    window.speechSynthesis.cancel();
    const txt = Array.isArray(phrases) ? phrases[Math.floor(Math.random()*phrases.length)] : phrases;
    if (!txt) return;
    const u = new window.SpeechSynthesisUtterance(txt);
    u.rate = 1.01; u.pitch = 1.07; u.lang = 'en-US';
    window.speechSynthesis.speak(u);
  } catch{}
}
function showConfetti() {
  confettiDiv.style.display = "flex";
  confettiDiv.innerHTML = '';
  const colors = [
    'var(--confetti-1)', 'var(--confetti-2)', 'var(--confetti-3)', 'var(--confetti-4)',
    'var(--confetti-5)', 'var(--confetti-6)'
  ];
  const N = 32 + Math.floor(Math.random()*18);
  for (let i = 0; i < N; ++i) {
    const div = document.createElement('div');
    div.style.left = `${Math.random() * 100}%`;
    div.style.top = `${8+Math.random()*60}%`;
    div.style.fontSize = `${22 + Math.random() * 44}px`;
    div.style.color = colors[Math.floor(Math.random()*colors.length)];
    div.innerText = confettiEmojis[Math.floor(Math.random()*confettiEmojis.length)];
    confettiDiv.appendChild(div);
    setTimeout(() => {
      div.style.transform = `translateY(${120 + Math.random()*260}px) rotate(${Math.random()*360}deg)`;
      div.style.opacity = '0.0';
    }, 35 + i*18);
  }
  setTimeout(() => { confettiDiv.style.display="none"; }, 1800);
}

/* ===== Typing Game ===== */
function renderTypingGame(el) {
  el.innerHTML = `
    <div class="progress-section">
      <div class="progress-dots"></div>
      <div class="progress-counter" aria-live="polite">0 / 36 keys discovered</div>
    </div>
    <section class="feedback" tabindex="0" aria-live="polite" aria-atomic="true">
      <div class="feedback-img" aria-label="Image for letter" style="display:none"></div>
      <div class="feedback-word" aria-label="Word"></div>
      <div class="feedback-number"></div>
      <div class="celebrate" style="display:none"></div>
    </section>
    <button class="play-again-btn" style="display:none" aria-label="Play again"><span>üîÑ</span> Play again!</button>
    <input id="hidden-input" type="text" maxlength="1" autocomplete="off" autocapitalize="characters" spellcheck="false" style="position:absolute;left:-9999px;">
  `;
  const progressDotsDiv = el.querySelector('.progress-dots');
  const progressCounter = el.querySelector('.progress-counter');
  const feedbackSection = el.querySelector('.feedback');
  const feedbackImg = el.querySelector('.feedback-img');
  const feedbackWord = el.querySelector('.feedback-word');
  const feedbackNumber = el.querySelector('.feedback-number');
  const playAgainBtn = el.querySelector('.play-again-btn');
  const celebrateDiv = el.querySelector('.celebrate');
  const hiddenInput = el.querySelector('#hidden-input');
  let discoveredKeys = new Set();
  function updateProgress() {
    progressDotsDiv.innerHTML = '';
    for (let key of keyOrder) {
      const dot = document.createElement('div');
      dot.className = 'progress-dot' + (discoveredKeys.has(key) ? ' found' : '');
      dot.innerText = key;
      dot.setAttribute('tabindex', '-1');
      dot.setAttribute('role','listitem');
      dot.setAttribute('aria-label', discoveredKeys.has(key) ? `${key}: found` : `${key}: not found`);
      progressDotsDiv.appendChild(dot);
    }
    const val = discoveredKeys.size;
    progressCounter.innerText = `${val} / 36 keys discovered`;
  }
  function showLetterFeedback(letter) {
    const data = alphabetData.find(d=>d.letter===letter) || {};
    feedbackImg.innerHTML = data.img
      ? `<img src="${data.img}" alt="${data.word||letter}" width="128" height="128" style="width:100%;height:100%;object-fit:contain;" loading="eager" />`
      : `<span style="font-size:5rem;">${letter}</span>`;
    feedbackImg.style.display = "";
    feedbackImg.classList.remove('show');
    setTimeout(() => feedbackImg.classList.add('show'), 12);
    feedbackWord.innerText = data.word || "";
    feedbackNumber.classList.remove('show');
    feedbackNumber.innerText = '';
    celebrateDiv.style.display = "block";
    celebrateDiv.innerHTML = confettiEmojis[Math.floor(Math.random()*confettiEmojis.length)] + " " + cheerPhrases[Math.floor(Math.random()*cheerPhrases.length)];
    playSound(clickSound);
    playSound(cheerSound);
    sayPhrase(cheerPhrases);
    setTimeout(()=>celebrateDiv.style.display="none", 1400);
  }
  function showNumberFeedback(num) {
    feedbackImg.innerHTML = `<img src="${numberData[num].img}" alt="${num}" width="96" height="96" style="width:72%;height:72%;object-fit:contain;" loading="eager" />`;
    feedbackImg.style.display = "";
    feedbackImg.classList.add('show');
    feedbackWord.innerText = '';
    feedbackNumber.innerText = num;
    feedbackNumber.classList.add('show');
    celebrateDiv.style.display = "block";
    celebrateDiv.innerHTML = confettiEmojis[Math.floor(Math.random()*confettiEmojis.length)] + " " + cheerPhrases[Math.floor(Math.random()*cheerPhrases.length)];
    playSound(dingSound);
    playSound(cheerSound);
    sayPhrase(cheerPhrases);
    setTimeout(()=>celebrateDiv.style.display="none", 1400);
  }
  function clearFeedback() {
    feedbackImg.style.display = "none";
    feedbackImg.classList.remove('show');
    feedbackWord.innerText = '';
    feedbackNumber.innerText = '';
    feedbackNumber.classList.remove('show');
    celebrateDiv.style.display = "none";
  }
  function maybeShowPlayAgain() {
    if (discoveredKeys.size === TOTAL_KEYS) {
      setTimeout(() => {
        playAgainBtn.style.display = "";
        playAgainBtn.focus();
        showConfetti();
        playSound(cheerSound);
        sayPhrase(["Wow! You found all!", "You‚Äôre amazing!", "Super star!"]);
        celebrateDiv.innerHTML = "üéâü•≥üéâ All discovered! üéâü•≥üéâ";
        celebrateDiv.style.display = "block";
      }, 650);
    }
  }
  function onMobileInput(e) {
    const val = hiddenInput.value.toUpperCase();
    if (!val || !keySet.has(val)) {
      hiddenInput.value = '';
      sayPhrase("Try again!");
      return;
    }
    if (!discoveredKeys.has(val)) {
      discoveredKeys.add(val);
      updateProgress();
    }
    if (val >= "A" && val <= "Z") {
      showLetterFeedback(val);
    } else if (val >= "0" && val <= "9") {
      showNumberFeedback(val);
    }
    maybeShowPlayAgain();
    hiddenInput.value = '';
  }
  function onDesktopKey(e) {
    if (e.repeat) return;
    let key = e.key.toUpperCase();
    if (!keySet.has(key)) return;
    e.preventDefault();
    if (!discoveredKeys.has(key)) {
      discoveredKeys.add(key);
      updateProgress();
    }
    if (key >= "A" && key <= "Z") {
      showLetterFeedback(key);
    } else if (key >= "0" && key <= "9") {
      showNumberFeedback(key);
    }
    maybeShowPlayAgain();
  }
  function resetGame() {
    discoveredKeys.clear();
    updateProgress();
    clearFeedback();
    playAgainBtn.style.display = "none";
    if (/Android|iPhone|iPad|Mobile|Tablet|Silk|Opera Mini|webOS|IEMobile|BlackBerry|Windows Phone/i.test(navigator.userAgent)) {
      setTimeout(() => { hiddenInput.value = ''; hiddenInput.focus(); }, 200);
    } else {
      feedbackSection.focus();
    }
  }
  playAgainBtn.addEventListener('click', resetGame);
  feedbackSection.addEventListener('click', () => feedbackSection.focus());
  hiddenInput.addEventListener('input', onMobileInput);
  if (/Android|iPhone|iPad|Mobile|Tablet|Silk|Opera Mini|webOS|IEMobile|BlackBerry|Windows Phone/i.test(navigator.userAgent)) {
    setTimeout(() => { hiddenInput.value = ''; hiddenInput.focus(); }, 400);
  } else {
    document.addEventListener("keydown", onDesktopKey, { passive: false });
    hiddenInput.style.display = "none";
  }
  updateProgress();
  resetGame();
}
/* ===== Matching Game ===== */
function renderMatchingGame(el) {
  // Choose 5 random letters to match
  let choices = alphabetData.slice().sort(()=>0.5-Math.random()).slice(0,5);
  let shuffled = choices.slice().sort(()=>0.5-Math.random());
  el.innerHTML = `
    <div style="text-align:center;font-size:1.25rem;font-weight:700;color:var(--primary);margin-bottom:0.7em;">
      <span style="font-size:2em;">üß©</span> Match each letter to its animal!
    </div>
    <div class="match-drops" id="matchDrops">
      ${choices.map((d,i)=>`
      <div class="match-drop" data-letter="${d.letter}" aria-label="Drop for ${d.word}">
        <img class="match-img" src="${d.img}" alt="${d.word}" draggable="false" />
        <div class="drop-label">${d.word}</div>
      </div>
      `).join('')}
    </div>
    <div class="match-cards" id="matchCards" style="margin-top:1.3em;">
      ${shuffled.map((d,i)=>`
        <div class="match-card" draggable="true" data-letter="${d.letter}" aria-label="Drag letter ${d.letter}">
          <div style="font-size:2.1em;">${d.letter}</div>
        </div>
      `).join('')}
    </div>
    <div id="match-feedback" style="margin-top:1em;font-size:1.55em;font-weight:700;text-align:center;"></div>
    <button id="match-reset" class="play-again-btn" style="display:none;margin-top:1.2em;"><span>üîÑ</span> Play again!</button>
  `;
  const drops = Array.from(el.querySelectorAll('.match-drop'));
  const cards = Array.from(el.querySelectorAll('.match-card'));
  const feedback = el.querySelector('#match-feedback');
  const resetBtn = el.querySelector('#match-reset');
  let matched = 0;
  let draggingCard = null;
  // Touch and drag events
  cards.forEach(card => {
    card.addEventListener('dragstart', e=>{
      draggingCard = card; card.classList.add('dragging');
    });
    card.addEventListener('dragend', e=>{
      draggingCard = null; card.classList.remove('dragging');
    });
    card.addEventListener('touchstart', function(e) {
      draggingCard = card; card.classList.add('dragging');
      card.style.zIndex = 20;
    });
    card.addEventListener('touchend', function(e) {
      card.classList.remove('dragging');
      card.style.zIndex = '';
      draggingCard = null;
    });
  });
  drops.forEach(drop => {
    drop.addEventListener('dragover', e => { e.preventDefault(); });
    drop.addEventListener('drop', e => {
      if (!draggingCard) return;
      if (drop.dataset.letter === draggingCard.dataset.letter && !drop.classList.contains('matched')) {
        drop.classList.add('matched');
        draggingCard.style.visibility = 'hidden';
        matched++;
        feedback.innerHTML = `<span class="celebrate">${confettiEmojis[Math.floor(Math.random()*confettiEmojis.length)]} ${cheerPhrases[Math.floor(Math.random()*cheerPhrases.length)]}</span>`;
        playSound(dingSound);
        playSound(cheerSound);
        sayPhrase(cheerPhrases);
        showConfetti();
        if (matched === choices.length) {
          setTimeout(()=>{feedback.innerHTML = `<span class="celebrate">üéâ You matched all! üéâ</span>`; playSound(cheerSound); resetBtn.style.display="";},700);
        }
      } else {
        feedback.innerHTML = `<span style="color:#fb6d6d;font-size:1em;">Try again!</span>`;
        sayPhrase("Try again!");
        playSound(clickSound);
      }
    });
    drop.addEventListener('touchmove', e=>{e.preventDefault();});
    drop.addEventListener('touchend', e => {
      if (!draggingCard) return;
      const touch = e.changedTouches[0];
      const dropRect = drop.getBoundingClientRect();
      if (
        touch.clientX >= dropRect.left && touch.clientX <= dropRect.right &&
        touch.clientY >= dropRect.top && touch.clientY <= dropRect.bottom
      ) {
        if (drop.dataset.letter === draggingCard.dataset.letter && !drop.classList.contains('matched')) {
          drop.classList.add('matched');
          draggingCard.style.visibility = 'hidden';
          matched++;
          feedback.innerHTML = `<span class="celebrate">${confettiEmojis[Math.floor(Math.random()*confettiEmojis.length)]} ${cheerPhrases[Math.floor(Math.random()*cheerPhrases.length)]}</span>`;
          playSound(dingSound);
          playSound(cheerSound);
          sayPhrase(cheerPhrases);
          showConfetti();
          if (matched === choices.length) {
            setTimeout(()=>{feedback.innerHTML = `<span class="celebrate">üéâ You matched all! üéâ</span>`; playSound(cheerSound); resetBtn.style.display="";},700);
          }
        } else {
          feedback.innerHTML = `<span style="color:#fb6d6d;font-size:1em;">Try again!</span>`;
          sayPhrase("Try again!");
          playSound(clickSound);
        }
      }
      draggingCard.classList.remove('dragging');
      draggingCard = null;
    });
  });
  resetBtn.addEventListener('click', ()=>renderMatchingGame(el));
}
/* ===== Counting Game ===== */
function renderCountingGame(el) {
  // Pick a random number 2-7
  const objects = [
    { word:"Apple", img:openmoji('1F34E') },
    { word:"Frog", img:openmoji('1F438') },
    { word:"Penguin", img:openmoji('1F427') },
    { word:"Ice Cream", img:openmoji('1F366') },
    { word:"Dog", img:openmoji('1F436') }
  ];
  const obj = objects[Math.floor(Math.random()*objects.length)];
  const correct = 2 + Math.floor(Math.random()*6);
  let arr = Array.from({length:correct});
  let options = [correct];
  while (options.length < 3) {
    let r = 2 + Math.floor(Math.random()*6);
    if (!options.includes(r)) options.push(r);
  }
  options = options.sort(()=>0.5-Math.random());
  el.innerHTML = `
    <div class="counting-q">${obj.word}s! How many?</div>
    <div class="counting-objects">
      ${arr.map(()=>`<img src="${obj.img}" alt="${obj.word}" draggable="false" />`).join('')}
    </div>
    <div class="counting-options">
      ${options.map(opt=>`<div class="count-opt" data-val="${opt}">${opt}</div>`).join('')}
    </div>
    <div id="count-feedback" style="margin-top:0.9em;font-size:1.6em;font-weight:700;text-align:center;"></div>
    <button id="count-reset" class="play-again-btn" style="display:none;margin-top:1.2em;"><span>üîÑ</span> Play again!</button>
  `;
  const countOpts = Array.from(el.querySelectorAll('.count-opt'));
  const feedback = el.querySelector('#count-feedback');
  const resetBtn = el.querySelector('#count-reset');
  countOpts.forEach(opt => {
    opt.addEventListener('click',()=>{
      if (parseInt(opt.dataset.val,10) === correct) {
        opt.classList.add('correct');
        feedback.innerHTML = `<span class="celebrate">${confettiEmojis[Math.floor(Math.random()*confettiEmojis.length)]} ${cheerPhrases[Math.floor(Math.random()*cheerPhrases.length)]}</span>`;
        playSound(dingSound);
        playSound(cheerSound);
        sayPhrase(cheerPhrases);
        showConfetti();
        setTimeout(()=>{feedback.innerHTML = `<span class="celebrate">üéâ You counted all! üéâ</span>`; playSound(cheerSound); resetBtn.style.display="";},700);
      } else {
        opt.classList.add('incorrect');
        feedback.innerHTML = `<span style="color:#fb6d6d;font-size:1em;">Try again!</span>`;
        sayPhrase("Try again!");
        playSound(clickSound);
      }
      countOpts.forEach(o=>o.style.pointerEvents="none");
    });
  });
  resetBtn.addEventListener('click',()=>renderCountingGame(el));
}
/* ====== Tab control ====== */
const tabs = [
  {id:"tab-typing", render:renderTypingGame},
  {id:"tab-matching", render:renderMatchingGame},
  {id:"tab-counting", render:renderCountingGame}
];
const tabBtns = tabs.map(t=>document.getElementById(t.id));
const gameContent = document.getElementById('game-content');
let activeIdx = 0;
function showTab(idx) {
  tabs.forEach((t,i)=>{
    tabBtns[i].classList.toggle('active',i===idx);
    tabBtns[i].setAttribute('aria-selected', i===idx ? "true" : "false");
  });
  activeIdx = idx;
  gameContent.innerHTML = '';
  tabs[idx].render(gameContent);
}
tabBtns.forEach((btn,idx)=>{
  btn.addEventListener('click',()=>showTab(idx));
  btn.addEventListener('keydown',e=>{
    if (e.key==="ArrowLeft"||e.key==="ArrowRight") {
      let newIdx = (activeIdx + (e.key==="ArrowLeft"?-1:1) + tabs.length)%tabs.length;
      tabBtns[newIdx].focus();
      showTab(newIdx);
    }
  });
});
showTab(0);
</script>
<!--
==== README ====
Toddler Playground ‚Äì Cheering Edition!
- Every correct answer gives a cheer sound and message; mistakes get gentle spoken encouragement.
- Switch games by tapping tabs. Everything is open-source, responsive, and mobile/tablet friendly!
- All animal/object images from OpenMoji.org (CC BY-SA 4.0).
- No dependencies, open in any browser.
MIT License.
-->
</body>
</html>
